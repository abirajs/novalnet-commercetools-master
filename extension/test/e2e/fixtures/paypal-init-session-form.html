<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Make Payment</title>
    <link
      rel="stylesheet"
      href="https://checkoutshopper-live.novalnet.com/checkoutshopper/sdk/5.53.2/novalnet.css"
      integrity="sha384-9EdBqZRrjozkt+Be5ycjHBTi+4DYrafpC1KyPnNyTBfjBIZ5+oMp8BbgvPLGgsE0"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div>
      <input
        type="text"
        id="novalnet-client-key"
        placeholder="novalnet client key"
      /><br />
      <input
        type="text"
        id="paypal-merchant-id"
        placeholder="Paypal merchant ID"
      /><br />
      <input
        type="text"
        id="novalnet-session-id"
        placeholder="novalnet session ID"
      /><br />
      <textarea
        id="novalnet-session-data"
        placeholder="novalnet session data"
      ></textarea
      ><br />
      <textarea
        id="novalnet-payment-auth-result"
        placeholder="Init session result"
      ></textarea>
    </div>
    <div id="paypal-container"></div>
    <script
      src="https://checkoutshopper-live.novalnet.com/checkoutshopper/sdk/5.53.2/novalnet.js"
      integrity="sha384-ng3HLoZIlQ3BLgyGyGNiwWSx6LEPIlmxVuGRw72skZFt9mL8OweRjp7vcPzSqxTj"
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
      // https://docs.novalnet.com/payment-methods/paypal/web-component
      const configuration = {
        environment: 'test', // When you're ready to accept live payments, change the value to one of our live environments https://docs.novalnet.com/checkout/components-web#testing-your-integration.
        clientKey: '', // Your client key. To find out how to generate one, see https://docs.novalnet.com/development-resources/client-side-authentication.
        showPayButton: true,
        amount: {
          currency: 'EUR',
          value: 1000,
        },
        analytics: {
          enabled: false, // Set to false to not send analytics data to novalnet.
        },
        session: {
          id: '',
          sessionData: '',
        },
        paymentMethodsConfiguration: { paypal: { intent: 'authorize' } },
        onPaymentCompleted: (result, component) => {
          document.getElementById('novalnet-payment-auth-result').innerHTML =
            JSON.stringify(result)
        },
        onError: (error, component) => {
          console.error(error.name, error.message, error.stack, component)
          document.getElementById('novalnet-payment-auth-result').innerHTML =
            JSON.stringify(error)
        },
      }
      const executenovalnetCheckout = async () => {
        configuration.clientKey = clientKeyElement.value
        configuration.session.id = sessionIdElement.value
        configuration.session.sessionData = sessionDataElement.value
        const paypalConfiguration = {
          configuration: {
            merchantId: merchantIdElement.value,
            intent: 'authorize',
          },
        }
        const checkout = await novalnetCheckout(configuration)
        checkout
          .create('paypal', paypalConfiguration)
          .mount('#paypal-container')
      }

      const clientKeyElement = document.getElementById('novalnet-client-key')
      const merchantIdElement = document.getElementById('paypal-merchant-id')
      const sessionIdElement = document.getElementById('novalnet-session-id')
      const sessionDataElement = document.getElementById('novalnet-session-data')
      sessionDataElement.addEventListener('blur', () => executenovalnetCheckout())
    </script>
  </body>
</html>
